webpackJsonp([2],{1856:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateTable=t.addTable=t.save=t.update=t.loadTable=void 0;var n=a(183),u=r(n),s=a(363),l=r(s),c=(t.loadTable=function(){var e=(0,l.default)(u.default.mark(function e(t){var a,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id||0,r=a?"/api/restql/web_node/"+a:"/api/restql/web_node",e.abrupt("return",(0,c.request)({url:r,method:"get"}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.update=function(){var e=(0,l.default)(u.default.mark(function e(t){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id||0){e.next=3;break}return e.abrupt("return");case 3:return delete t.id,e.abrupt("return",(0,c.request)({url:"/api/restql/web_node/"+a,method:"put",data:t}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.save=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)({url:"/api/restql/web_node",method:"post",data:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.addTable=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)({url:"/api/table",method:"post",data:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.updateTable=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)({url:"/api/table",method:"put",data:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a(88))},796:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(183),u=r(n),s=a(1),l=r(s),c=a(1856),d={id:"",template:"",template_name:"",cont:"",status:1,time:""};t.default={namespace:"tableForm",state:(0,l.default)({},d),effects:{loadTable:u.default.mark(function e(t,a){var r,n=t.payload,s=a.call,l=a.put;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(c.loadTable,n);case 2:if(!(r=e.sent)||!r.success){e.next=6;break}return e.next=6,l({type:"loadTableSuccess",payload:r});case 6:case"end":return e.stop()}},e,this)}),saveTable:u.default.mark(function e(t,a){var r,n,s,l,d=t.payload,o=a.call,p=a.put;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,n=null,s=d.callback,delete d.callback,console.log("payload",d),l={template:d.template||"",template_name:d.template_name,cont:encodeURIComponent(d.cont||""),status:d.status||0,time:d.time},!d.id){e.next=15;break}return l.id=d.id,e.next=9,o(c.update,l);case 9:return r=e.sent,e.next=12,o(c.updateTable,{tableName:d.template,data:JSON.parse(d.cont)});case 12:n=e.sent,e.next=21;break;case 15:return e.next=17,o(c.save,l);case 17:return r=e.sent,e.next=20,o(c.addTable,{tableName:d.template,data:JSON.parse(d.cont)});case 20:n=e.sent;case 21:return e.next=23,p({type:"loadTableSuccess",payload:r});case 23:s&&s(r);case 24:case"end":return e.stop()}},e,this)})},reducers:{resetState:function(e){return(0,l.default)({},e,d)},loadTableSuccess:function(e,t){var a=t.payload&&t.payload.data;return a?(0,l.default)({},e,a,{cont:window.decodeURIComponent(a.cont||"")}):e}}},e.exports=t.default}});