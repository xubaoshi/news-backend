webpackJsonp([5],{1812:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(784),l=a(o),i=n(122),s=a(i),r=n(365),d=a(r),p=n(1),u=a(p),c=n(780),h=a(c),f=n(237),g=a(f),w=n(3),m=a(w),y=n(6),b=a(y),v=n(5),k=a(v),C=n(4),x=a(C),R=n(789),_=a(R);n(785),n(149),n(366),n(781),n(790);var E=n(0),T=a(E),A=n(238),M=(n(62),n(8)),K=a(M),S=n(151),B=n(1871),D=a(B),I=[{title:"序号",dataIndex:"nid"},{title:"标题",dataIndex:"title"},{title:"时间",dataIndex:"time",render:function(e,t){return(0,K.default)(parseInt(e)).format("YYYY年MM月DD日")}},{title:"内容",dataIndex:"con",render:function(e){return T.default.createElement(_.default,{content:T.default.createElement("div",{className:D.default.pop},e),title:"内容"},T.default.createElement("span",null,e&&e.length>30?e.substring(0,30)+"...":e))}},{title:"状态",dataIndex:"status"},{title:"操作",width:150}],z={display:"inline-block",padding:"0 10px",cursor:"pointer"},N=function(e){function t(e,n){(0,m.default)(this,t);var a=(0,k.default)(this,(t.__proto__||(0,g.default)(t)).call(this,e,n)),o=I.length;return I[o-1].render=function(e,t,n){return T.default.createElement("div",null,T.default.createElement("span",{onClick:a.toTableManagerForm.bind(a,t.nid),style:z},"编辑"))},I[o-2].render=function(e,t){return T.default.createElement(h.default,{checked:1===e,onChange:a.changeTableManagerState.bind(a,t),checkedChildren:"开",unCheckedChildren:"关"})},a}return(0,x.default)(t,e),(0,b.default)(t,[{key:"componentDidMount",value:function(){this.loadTableData()}},{key:"loadTableData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this.props.dispatch({type:"news/loadNews",payload:{page:e,pageSize:t}})}},{key:"tableChange",value:function(e){this.loadTableData(e.current,e.pageSize)}},{key:"selectRow",value:function(e){this.props.dispatch({type:"news/selectedRowKeys",payload:{selectedRowKeys:e}})}},{key:"toTableManagerForm",value:function(e){e?this.props.dispatch(S.routerRedux.push({pathname:"/news/edit/"+e})):this.props.dispatch(S.routerRedux.push({pathname:"/news/create"}))}},{key:"changeTableManagerState",value:function(e){console.log("switchChange",e);var t=1===e.status?0:1;this.props.dispatch({type:"news/updateNew",payload:(0,u.default)({},e,{status:t,page:this.props.pagination.current,pageSize:this.props.pagination.pageSize})})}},{key:"deleteTableManager",value:function(){var e=this;this.props.selectedRowKeys.length>0?d.default.confirm({title:"确定要删除所选数据?",content:"点击确定，数据则被删除",onOk:function(){var t=[];e.props.list.forEach(function(n,a){-1!==e.props.selectedRowKeys.indexOf(n.nid)&&t.push(n.template)}),e.props.dispatch({type:"news/removeNew",payload:{selectedRowKeys:e.props.selectedRowKeys,templateArr:t}})}}):d.default.warning({title:"未选中任何数据",content:"请选择要删除的数据"})}},{key:"render",value:function(){var e={selectedRowKeys:this.props.selectedRowKeys,onChange:this.selectRow.bind(this)},t=(0,u.default)({showTotal:function(e){return"共"+e+"条数据"},showSizeChanger:!0,showQuickJumper:!0},this.props.pagination);return T.default.createElement("div",{className:"content-inner"},T.default.createElement("div",{style:{paddingBottom:10,marginBottom:20,borderBottom:"1px solid #ddd"}},T.default.createElement(s.default,{onClick:this.toTableManagerForm.bind(this,0),style:{marginRight:10}},"新增"),T.default.createElement(s.default,{onClick:this.deleteTableManager.bind(this)},"删除")),T.default.createElement(l.default,{columns:I,rowSelection:e,pagination:t,dataSource:this.props.list,rowKey:"nid",loading:this.props.loading,bordered:!0,onChange:this.tableChange.bind(this)}))}}]),t}(E.Component);N.contextTypes={router:E.PropTypes.object},t.default=(0,A.connect)(function(e){var t=e.news;return{list:t.list,loading:t.loading,total:t.total,selectedRowKeys:t.selectedRowKeys,pagination:t.pagination}})(N),e.exports=t.default},1858:function(e,t,n){t=e.exports=n(1806)(),t.push([e.i,".pop___2_X1G {\n  width: 300px;\n  word-wrap: break-word;\n}\n","",{version:3,sources:["/./static/src/routes/news/index.less"],names:[],mappings:"AAAA;EACE,aAAa;EACb,sBAAsB;CACvB",file:"index.less",sourcesContent:[".pop {\n  width: 300px;\n  word-wrap: break-word;\n}\n"],sourceRoot:"webpack://"}]),t.locals={pop:"pop___2_X1G"}},1871:function(e,t,n){var a=n(1858);"string"==typeof a&&(a=[[e.i,a,""]]);n(1807)(a,{});a.locals&&(e.exports=a.locals)}});